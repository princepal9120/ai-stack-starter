---
import Layout from "./Layout.astro";

interface Props {
  title: string;
}

const { title } = Astro.props;

const sidebar = [
  {
    section: "Getting Started",
    links: [
      { text: "Introduction", href: "/docs" },
      { text: "Quick Start", href: "/docs/quickstart" },
      { text: "Installation", href: "/docs/installation" },
    ],
  },
  {
    section: "Core Concepts",
    links: [
      { text: "Architecture", href: "/docs/architecture" },
      { text: "RAG Pipeline", href: "/docs/rag-pipeline" },
      { text: "LLM Providers", href: "/docs/llm-providers" },
      { text: "Vector Databases", href: "/docs/vector-databases" },
    ],
  },
  {
    section: "Deployment",
    links: [
      { text: "Docker", href: "/docs/deployment" },
      { text: "Kubernetes", href: "/docs/kubernetes" },
    ],
  },
];

const currentPath = Astro.url.pathname;

// Determine current page info for breadcrumbs
let currentSection = "";
let currentPage = "Introduction";
for (const group of sidebar) {
  for (const link of group.links) {
    if (currentPath === link.href || currentPath === link.href + "/") {
      currentSection = group.section;
      currentPage = link.text;
    }
  }
}
---

<Layout title={`${title} - AI Stack Docs`}>
  <!-- Fixed Header -->
  <header
    class="fixed inset-x-0 top-0 z-50 h-14 border-b border-slate-800 bg-slate-950/80 backdrop-blur-xl"
  >
    <div
      class="mx-auto flex h-full max-w-screen-2xl items-center justify-between px-4 lg:px-8"
    >
      <div class="flex items-center gap-8">
        <a
          href="/"
          class="flex items-center gap-2 text-xl font-bold text-white"
        >
          <span class="text-2xl">T3</span>
        </a>
        <nav class="hidden md:flex items-center gap-1">
          <a
            href="/docs"
            class="px-3 py-1.5 text-sm font-medium text-white bg-slate-800 rounded-md"
            >Docs</a
          >
          <a
            href="/showcase"
            class="px-3 py-1.5 text-sm font-medium text-slate-400 hover:text-white transition"
            >FAQ</a
          >
        </nav>
      </div>
      <div class="flex items-center gap-4">
        <div class="hidden md:flex items-center gap-2 text-slate-400 text-sm">
          <span>‚òÖ 28K</span>
        </div>
        <a
          href="https://github.com"
          class="p-2 hover:bg-slate-800 rounded-lg transition"
        >
          <svg
            class="w-5 h-5 text-slate-300"
            fill="currentColor"
            viewBox="0 0 24 24"
            ><path
              d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
            ></path></svg
          >
        </a>
        <div class="flex items-center gap-2 border-l border-slate-700 pl-4">
          <button
            class="p-2 hover:bg-slate-800 rounded-lg transition text-slate-400"
            >üåô</button
          >
        </div>
        <div
          class="hidden lg:flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-400 text-sm"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg
          >
          <span>Search</span>
          <span
            class="ml-8 text-xs border border-slate-600 rounded px-1.5 py-0.5"
            >/</span
          >
        </div>
      </div>
    </div>
  </header>

  <div class="flex pt-14">
    <!-- Left Sidebar -->
    <aside
      class="fixed left-0 top-14 z-20 hidden h-[calc(100vh-3.5rem)] w-64 overflow-y-auto border-r border-slate-800 bg-slate-950 pb-10 lg:block"
    >
      <nav class="px-4 pt-6 space-y-6">
        <div class="text-sm">
          <div class="font-medium text-slate-200 mb-2">Create T3 App</div>
          <div class="ml-2 border-l border-slate-800 pl-2">
            <a href="/docs" class="block py-1 text-purple-400 text-sm"
              >Introduction</a
            >
          </div>
        </div>

        {
          sidebar.map((group) => (
            <div>
              <h3 class="font-semibold text-slate-400 text-xs uppercase tracking-wider mb-2">
                {group.section}
              </h3>
              <ul class="space-y-1">
                {group.links.map((link) => {
                  const isActive =
                    currentPath === link.href ||
                    currentPath === link.href + "/";
                  return (
                    <li>
                      <a
                        href={link.href}
                        class:list={[
                          "block py-1.5 px-2 text-sm rounded transition-colors",
                          isActive
                            ? "text-purple-400 bg-purple-500/10"
                            : "text-slate-400 hover:text-slate-200 hover:bg-slate-800/50",
                        ]}
                      >
                        {link.text}
                      </a>
                    </li>
                  );
                })}
              </ul>
            </div>
          ))
        }
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 lg:pl-64">
      <div class="mx-auto max-w-4xl px-4 py-8 lg:px-8">
        <!-- Breadcrumbs -->
        <div class="flex items-center gap-2 text-sm text-slate-400 mb-6">
          <a href="/" class="hover:text-white transition">
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              ><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              ></path></svg
            >
          </a>
          <span class="text-slate-600">‚Ä∫</span>
          <span>{currentPage}</span>
        </div>

        <!-- Content -->
        <article
          class="prose prose-invert prose-slate max-w-none
          prose-headings:font-bold prose-headings:text-white prose-headings:tracking-tight
          prose-h1:text-3xl prose-h1:mb-4
          prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-4 prose-h2:border-b prose-h2:border-slate-800 prose-h2:pb-2
          prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-3
          prose-p:text-slate-300 prose-p:leading-relaxed
          prose-a:text-purple-400 prose-a:no-underline hover:prose-a:underline
          prose-strong:text-white prose-strong:font-semibold
          prose-code:text-purple-300 prose-code:bg-slate-800/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:before:content-none prose-code:after:content-none
          prose-pre:bg-slate-900 prose-pre:border prose-pre:border-slate-800 prose-pre:rounded-lg
          prose-ul:text-slate-300
          prose-ol:text-slate-300
          prose-li:marker:text-slate-500"
        >
          <slot />
        </article>

        <!-- Footer Links -->
        <div class="mt-16 pt-8 border-t border-slate-800">
          <div class="flex flex-wrap gap-6 text-sm">
            <a
              href="#"
              class="flex items-center gap-2 text-slate-400 hover:text-white transition"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                ></path></svg
              >
              Edit this page
            </a>
            <a
              href="#"
              class="flex items-center gap-2 text-slate-400 hover:text-white transition"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
                ></path></svg
              >
              Translate this page
            </a>
            <a
              href="#"
              class="flex items-center gap-2 text-slate-400 hover:text-white transition"
            >
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"
                ><path
                  d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"
                ></path></svg
              >
              Join Our Discord Community
            </a>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Sidebar (On This Page) -->
    <aside class="hidden xl:block w-64 shrink-0">
      <div class="sticky top-20 py-8 pr-4">
        <h4 class="text-sm font-semibold text-slate-200 mb-4">On this page</h4>
        <nav class="space-y-2 text-sm">
          <a href="#" class="block text-purple-400">{title}</a>
        </nav>

        <div class="mt-8 pt-6 border-t border-slate-800">
          <h4 class="text-sm font-semibold text-slate-200 mb-4">More</h4>
          <nav class="space-y-2 text-sm text-slate-400">
            <a
              href="#"
              class="flex items-center gap-2 hover:text-white transition"
            >
              ‚úèÔ∏è Edit this page
            </a>
            <a
              href="#"
              class="flex items-center gap-2 hover:text-white transition"
            >
              üåê Translate this page
            </a>
            <a
              href="#"
              class="flex items-center gap-2 hover:text-white transition"
            >
              üí¨ Join Our Discord Community
            </a>
          </nav>
        </div>
      </div>
    </aside>
  </div>
</Layout>
