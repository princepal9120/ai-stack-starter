---
title: Deployment
description: Deploy your AI Stack application to production
---

## Overview

AI Stack applications can be deployed to various platforms. This guide covers the most common deployment targets.

## Deployment Options

| Platform | Best For | Architecture Support |
|----------|----------|---------------------|
| Vercel | Next.js apps | nextjs |
| Docker | Self-hosted | All |
| Kubernetes | Enterprise scale | All |
| Railway | Quick deploys | All |

## Vercel Deployment

### Prerequisites

- Vercel account
- GitHub repository

### Steps

1. **Connect Repository**

```bash
npx vercel link
```

2. **Set Environment Variables**

```bash
vercel env add OPENAI_API_KEY
vercel env add DATABASE_URL
vercel env add QDRANT_URL
```

3. **Deploy**

```bash
vercel --prod
```

### Configuration

```json
// vercel.json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "installCommand": "npm install"
}
```

## Docker Deployment

### Dockerfile (Next.js)

```dockerfile
FROM node:20-alpine AS base

FROM base AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci

FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .
RUN npm run build

FROM base AS runner
WORKDIR /app
ENV NODE_ENV=production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT=3000

CMD ["node", "server.js"]
```

### Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - QDRANT_URL=http://qdrant:6333
    depends_on:
      - qdrant

  qdrant:
    image: qdrant/qdrant
    ports:
      - "6333:6333"
    volumes:
      - qdrant_data:/qdrant/storage

volumes:
  qdrant_data:
```

### Build and Run

```bash
docker-compose up -d
```

## Kubernetes Deployment

### Deployment Manifest

```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ai-stack-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: ai-stack
  template:
    metadata:
      labels:
        app: ai-stack
    spec:
      containers:
        - name: app
          image: your-registry/ai-stack:latest
          ports:
            - containerPort: 3000
          env:
            - name: DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: ai-stack-secrets
                  key: database-url
          resources:
            requests:
              memory: "256Mi"
              cpu: "250m"
            limits:
              memory: "512Mi"
              cpu: "500m"
```

### Service

```yaml
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: ai-stack-service
spec:
  selector:
    app: ai-stack
  ports:
    - port: 80
      targetPort: 3000
  type: LoadBalancer
```

### Deploy

```bash
kubectl apply -f k8s/
```

## Railway Deployment

### Quick Deploy

1. Connect your GitHub repository
2. Railway auto-detects the framework
3. Add environment variables in dashboard
4. Deploy

### Railway Config

```toml
# railway.toml
[build]
builder = "nixpacks"

[deploy]
startCommand = "npm start"
healthcheckPath = "/api/health"
```

## Environment Variables

### Required

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | Database connection string |
| `OPENAI_API_KEY` | LLM provider API key |

### Optional

| Variable | Description |
|----------|-------------|
| `QDRANT_URL` | Vector database URL |
| `NEXTAUTH_SECRET` | Auth secret (32+ chars) |
| `NEXTAUTH_URL` | Production URL |

### Secrets Management

For production, use:
- Vercel: Environment Variables UI
- Docker: Docker secrets or `.env` files
- Kubernetes: Secrets or external secret managers

## Health Checks

Add a health endpoint:

```typescript
// app/api/health/route.ts
export async function GET() {
  return Response.json({ status: 'ok', timestamp: Date.now() });
}
```

## Monitoring

### Recommended Tools

- **Vercel Analytics** - Built-in for Vercel
- **Sentry** - Error tracking
- **PostHog** - Product analytics
- **Grafana** - Metrics and dashboards

## Checklist

- [ ] Set all required environment variables
- [ ] Configure database connection
- [ ] Set up vector database (if using)
- [ ] Enable HTTPS
- [ ] Configure CORS
- [ ] Set up monitoring and alerting
- [ ] Test health endpoints
- [ ] Configure auto-scaling (if applicable)
