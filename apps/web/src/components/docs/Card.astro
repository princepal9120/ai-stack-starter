---
import { Icon } from "astro-icon/components";

interface Props {
  title: string;
  href?: string;
  icon?: string;
  iconSrc?: string;
  iconName?: string;
}

const { title, href, icon = "ðŸ“„", iconSrc, iconName } = Astro.props;
const Tag = href ? "a" : "div";
---

<Tag
  href={href}
  class:list={[
    "card block p-5 rounded-xl bg-slate-800/50 border border-slate-700",
    "transition-all duration-200",
    href &&
      "hover:border-purple-500/50 hover:bg-slate-800 hover:shadow-lg hover:shadow-purple-500/10 cursor-pointer",
    !href && "cursor-default",
  ]}
>
  <div class="flex items-start gap-4">
    {iconName ? (
      <Icon name={iconName} class="h-8 w-8 shrink-0 text-slate-300" />
    ) : iconSrc ? (
      <div class="h-8 w-8 shrink-0 flex items-center justify-center">
        <img
          src={iconSrc}
          alt={title}
          class="h-full w-full object-contain"
          onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\"text-2xl\">' + (this.alt.charAt(0) || 'ðŸ“„') + '</span>'"
        />
      </div>
    ) : (
      <span class="text-2xl shrink-0">{icon}</span>
    )}
    <div class="flex-1 min-w-0">
      <h3
        class="font-semibold text-white mb-1 group-hover:text-purple-400 transition-colors"
      >
        {title}
        {
          href && (
            <span class="inline-block ml-1 transition-transform group-hover:translate-x-1">
              â†’
            </span>
          )
        }
      </h3>
      <div class="text-slate-400 text-sm [&>p]:m-0">
        <slot />
      </div>
    </div>
  </div>
</Tag>

<style>
  .card:hover h3 {
    color: #a78bfa;
  }
</style>
